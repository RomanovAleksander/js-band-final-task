(this["webpackJsonpjs-band-final-task"]=this["webpackJsonpjs-band-final-task"]||[]).push([[0],{34:function(e,t,a){e.exports=a(57)},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),c=a.n(o),i=a(4),l=a(13),s=a(15),u=(a(43),{userSignOut:function(){return{type:"SIGN_OUT"}}}),m=Object(s.g)(Object(i.b)((function(e){return{booksInCart:e.bookAndCart.cart.booksInCart,username:e.userData.user.username,avatar:e.userData.user.avatar,token:e.userData.user.token,isAuthorized:e.userData.isAuthorized}}),u)((function(e){var t=e.username,a=e.avatar,r=e.isAuthorized,o=e.booksInCart,c=e.history,i=e.userSignOut,s=n.a.createElement("div",{className:"shop-menu"},n.a.createElement(l.b,{to:"/cart"},n.a.createElement("i",{className:"cart fa fa-shopping-cart"}),n.a.createElement("span",{className:"cart-count"},o)),n.a.createElement("div",{className:"menu-item"},n.a.createElement("button",{className:"btn btn-primary",onClick:function(){i(),c.push("/signin")}},"Sign-Out")),n.a.createElement("div",{className:"menu-item row"},n.a.createElement("img",{src:a,alt:"avatar",className:"rounded-circle"}),n.a.createElement("div",{className:"user-name"},t)));return n.a.createElement("header",{className:"shop-header row"},n.a.createElement(l.b,{to:"/books"},n.a.createElement("div",{className:"logo"},"JS BAND STORE / Oleksandr Romanov")),r?s:null)}))),d=a(2),b=a(3),p=a(7),f=a(6),h=a(8),E=(a(45),function(e){var t=e.book,a=e.onView,r=t.title,o=t.author,c=t.price,i=t.cover;return n.a.createElement("div",{className:"book-list-item"},n.a.createElement("img",{src:i,alt:"cover",className:"cart-img-top"}),n.a.createElement("div",{className:"book-details"},n.a.createElement("div",{className:"book-title"},r),n.a.createElement("div",{className:"book-author"},o)),n.a.createElement("div",{className:"book-footer"},n.a.createElement("div",{className:"book-price"},c," $"),n.a.createElement("button",{onClick:a,className:"btn btn-primary"},"View")))}),v=a(19),k=a.n(v),O=a(27),g=new(function(){function e(){Object(d.a)(this,e),this._url="https://js-band-api.glitch.me",this.errObj=function(e,t){return{message:"Invalid request: ".concat(e,", status ").concat(t),status:t}}}return Object(b.a)(e,[{key:"fetchData",value:function(){var e=Object(O.a)(k.a.mark((function e(t,a){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._url).concat(t),a);case 2:if((r=e.sent).ok){e.next=5;break}throw this.errObj("".concat(this._url).concat(t),r.status);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(O.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchData(t,{mode:"cors",headers:{Authorization:"Bearer ".concat(a)}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"post",value:function(e,t,a){var r={"Content-Type":"application/json"};return a&&(r.Authorization="Bearer ".concat(a)),this.fetchData(e,{method:"POST",mode:"cors",headers:r,body:JSON.stringify(t)})}}]),e}()),y=new(function(){function e(){return Object(d.a)(this,e),e.instance?e.instance:(e.instance=this,this)}return Object(b.a)(e,[{key:"getItem",value:function(e){return JSON.parse(localStorage.getItem("".concat(e)))}},{key:"setItem",value:function(e,t){return localStorage.setItem("".concat(e),JSON.stringify(t))}}]),e}()),C=(a(47),function(){return n.a.createElement("div",{className:"spinner"},n.a.createElement("div",{className:"loadingio-spinner-double-ring-5gwf7wyqw2d"},n.a.createElement("div",{className:"ldio-mrii3anle"},n.a.createElement("div",null," "),n.a.createElement("div",null," "),n.a.createElement("div",null,n.a.createElement("div",null," ")),n.a.createElement("div",null,n.a.createElement("div",null," ")))))}),j=(a(48),function(e){var t=e.status;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"error-indicator"},"Ops... Something went wrong",t&&n.a.createElement("p",null,"Try Re-Sign-In")))}),S=(a(49),function(e){var t=e.books,a=e.onView;return n.a.createElement("ul",{className:"book-list"},t.map((function(e){return n.a.createElement("li",{key:e.id},n.a.createElement(E,{book:e,onView:function(){return a(e.id)}}))})))}),N=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.booksLoaded,a=e.booksRequested,r=e.booksError,n=e.token;a(),g.get("/books",n).then((function(e){return t(e)})).catch((function(e){r(e)}))}},{key:"search",value:function(e,t){return 0===t?e:e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1}))}},{key:"filterByPrice",value:function(e,t){switch(t){case"all":return e;case"0-15":return e.filter((function(e){return e.price>=0&&e.price<15}));case"15-30":return e.filter((function(e){return e.price>=15&&e.price<=30}));case">30":return e.filter((function(e){return e.price>30}));default:return e}}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.loading,r=e.searchText,o=e.filterPrice,c=e.onView,i=e.isAuthorized,l=e.error;if(a)return n.a.createElement(C,null);if(l)return 401===l.status?n.a.createElement(j,{status:l.status}):n.a.createElement(j,null);if(!i)return n.a.createElement("div",null,"Not Found");if(t){var s=this.filterByPrice(this.search(t,r),o);return n.a.createElement(S,{onView:c,books:s})}}}]),t}(n.a.Component),w={booksLoaded:function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},booksRequested:function(){return{type:"FETCH_BOOKS_REQUEST"}},booksError:function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}}},T=Object(i.b)((function(e){return{books:e.bookList.books,searchText:e.bookList.searchText,filterPrice:e.bookList.filterPrice,token:e.userData.user.token,isAuthorized:e.userData.isAuthorized,loading:e.bookList.loading,error:e.bookList.error}}),w)(N),A=(a(50),function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).onSearchChange=function(e){var t=e.target;(0,a.props.searchBooks)(t.value)},a.handleFilterChange=function(e){var t=e.target;(0,a.props.filterBooks)(t.value)},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchText,a=e.filterPrice;return n.a.createElement("div",{className:"filter-wrapper"},n.a.createElement("input",{type:"search",className:"form-control",placeholder:"search by title",onChange:this.onSearchChange,value:t}),n.a.createElement("select",{className:"select-status select",key:"status",onChange:this.handleFilterChange,value:a},n.a.createElement("option",{value:"all"},"Price"),n.a.createElement("option",{value:"0-15"},"0-15"),n.a.createElement("option",{value:"15-30"},"15-30"),n.a.createElement("option",{value:">30"},">30")))}}]),t}(n.a.Component)),D={searchBooks:function(e){return{type:"SEARCH_BOOKS",payload:{searchText:e}}},filterBooks:function(e){return{type:"FILTER_BOOKS",payload:{filterPrice:e}}}},I=Object(i.b)((function(e){return{searchText:e.bookList.searchText,filterPrice:e.bookList.filterPrice}}),D)(A),P=(a(51),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).trackScroll=function(){var t=window.pageYOffset,a=document.documentElement.clientHeight;t>a&&e.setState({isScrolled:!0}),t<a&&e.setState({isScrolled:!1})},e.backToTop=function(){window.pageYOffset>0&&(window.scrollBy(0,-100),setTimeout(e.backToTop,0))},e.state={isScrolled:!1},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.trackScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.trackScroll)}},{key:"render",value:function(){var e=this.state.isScrolled?"show":"";return n.a.createElement("div",{className:"back-top ".concat(e),title:"Go to top",onClick:this.backToTop},n.a.createElement("i",{className:"fa fa-arrow-circle-up","aria-hidden":"true"}," "))}}]),t}(n.a.Component)),_=Object(s.g)((function(e){var t=e.history;return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(I,null),n.a.createElement(T,{onView:function(e){t.push("/books/".concat(e))}}),n.a.createElement(P,null))})),x=(a(52),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).onCountChange=function(t){var a=t.target;e.setState({booksCount:parseFloat(a.value)})},e.onSubmit=function(t){t.preventDefault();var a=e.props,r=a.book,n=a.bookAddedToCart,o=e.state.booksCount;n(r.id,o),e.setState({booksCount:0})},e.state={booksCount:1},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookLoaded,a=e.bookRequested,r=e.bookError,n=e.bookId,o=e.token;a(),g.get("/books/".concat(n),o).then((function(e){t(e)})).catch((function(e){r(e)}))}},{key:"render",value:function(){var e=this.props,t=e.book,a=e.loading,r=e.maxCount,o=e.minCount,c=e.cartItems,i=e.isAuthorized,l=e.error,s=this.state.booksCount,u=c.findIndex((function(e){return e.id===t.id})),m=c[u],d=m?m.count:0;if(a)return n.a.createElement(C,null);if(l)return 401===l.status?n.a.createElement(j,{status:l.status}):n.a.createElement(j,null);if(!i)return n.a.createElement("div",null,"Not Found");if(t){var b=t.title,p=t.author,f=t.level,h=t.tags,E=t.cover,v=t.description,k=t.price,O=r-d,g=s<=O||isNaN(s)?"is-valid":"is-invalid",y=(k*s).toFixed(2),S=isNaN(s)?0:y;return n.a.createElement("main",{className:"container book-page"},n.a.createElement("div",{className:"book-details-wrapper"},n.a.createElement("div",{className:"main-details"},n.a.createElement("img",{src:E,alt:"cover",className:"cart-img"}),n.a.createElement("div",{className:"book-details"},n.a.createElement("div",{className:"book-title"},n.a.createElement("b",null,"Title: "),b),n.a.createElement("div",{className:"book-author"},n.a.createElement("b",null,"Author: "),p),n.a.createElement("div",{className:"book-level"},n.a.createElement("b",null,"Level: "),f),n.a.createElement("div",{className:"book-tags"},n.a.createElement("b",null,"Tags: "),h))),n.a.createElement("div",{className:"description"},n.a.createElement("b",null,"Description: "),v)),n.a.createElement("form",{className:"price-wrapper",onSubmit:this.onSubmit},n.a.createElement("div",{className:"price-counter"},n.a.createElement("div",{className:"price-item"},n.a.createElement("b",null,"Price, $"),n.a.createElement("b",null,k)),n.a.createElement("label",{className:"counter-wrapper",htmlFor:"count-input"},n.a.createElement("b",null,"Count"),n.a.createElement("div",{className:"input-wrapper"},n.a.createElement("input",{type:"number",className:"counter form-control ".concat(g),onChange:this.onCountChange,max:O,min:o,value:s,id:"count-input",required:!0}),n.a.createElement("div",{className:"invalid-feedback"},"We don't have so much =("))),n.a.createElement("div",{className:"price-item"},n.a.createElement("b",null,"Total price"),n.a.createElement("b",null,S))),n.a.createElement("button",{className:"btn btn-primary add-to-cart",type:"submit"},"Add to cart")))}}}]),t}(n.a.Component)),F={bookLoaded:function(e){return{type:"FETCH_BOOK_SUCCESS",payload:e}},bookRequested:function(){return{type:"FETCH_BOOK_REQUEST"}},bookError:function(e){return{type:"FETCH_BOOK_FAILURE",payload:e}},bookAddedToCart:function(e,t){return{type:"BOOK_ADDED_TO_CART",payload:{bookId:e,count:t}}}},R=Object(i.b)((function(e){return{book:e.bookAndCart.bookDetails.book,maxCount:e.bookAndCart.bookDetails.maxCount,minCount:e.bookAndCart.bookDetails.minCount,cartItems:e.bookAndCart.cart.cartItems,token:e.userData.user.token,isAuthorized:e.userData.isAuthorized,loading:e.bookAndCart.bookDetails.loading,error:e.bookAndCart.bookDetails.error}}),F)(x),L=function(e){var t=e.bookId;return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(R,{bookId:t}))},U=(a(53),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).purchase=function(){var t=e.props,a=t.items,r=t.token,n=t.purchaseRequest,o=t.purchaseSuccess,c=t.purchaseError;n(),g.post("/purchase",{books:a},r).then((function(t){o(),e.setState({isShow:!0,message:t.message})})).catch((function(e){c(e)}))},e.renderRow=function(e){var t=e.id,a=e.title,r=e.count,o=e.totalPrice;return n.a.createElement("tr",{key:t},n.a.createElement("td",null,a),n.a.createElement("td",null,r),n.a.createElement("td",null,o))},e.renderEmptyCart=function(){return n.a.createElement("div",{className:"container text-center"},n.a.createElement("i",{className:"cart fa fa-shopping-cart cartEmpty"}),n.a.createElement("p",{className:"cartEmptyText"},"Cart empty..."))},e.renderFilledCart=function(t,a){return n.a.createElement("div",{className:"table-wrapper"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Book title:"),n.a.createElement("th",null,"Count:"),n.a.createElement("th",null,"Total price:"))),n.a.createElement("tbody",null,t.map(e.renderRow))),n.a.createElement("div",{className:"total"},"Total price, $ ",a))},e.renderCartItems=function(){var t=e.props,a=t.isCartEmpty,r=t.items,o=t.total,c=t.error,i=e.state,l=i.message,s=i.isShow;return c?n.a.createElement(j,null):s?n.a.createElement("div",{className:"purchase-message"},l):a?e.renderEmptyCart():e.renderFilledCart(r,o)},e.state={isShow:!1,message:null},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isCartEmpty,a=e.loading,r=t?"btn-secondary":"btn-primary";return n.a.createElement("div",{className:"cart-container"},n.a.createElement("button",{className:"btn ".concat(r),onClick:this.purchase,disabled:t},"Purchase"),a?n.a.createElement(C,null):this.renderCartItems())}}]),t}(n.a.Component)),B={purchaseRequest:function(){return{type:"PURCHASE_REQUEST"}},purchaseSuccess:function(){return{type:"PURCHASE_SUCCESS"}},purchaseError:function(e){return{type:"PURCHASE_FAILURE",payload:e}}},z=Object(i.b)((function(e){return{items:e.bookAndCart.cart.cartItems,total:e.bookAndCart.cart.orderTotal,isCartEmpty:e.bookAndCart.cart.isCartEmpty,token:e.userData.user.token,loading:e.bookAndCart.cart.loading,error:e.bookAndCart.cart.error}}),B)(U),H=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(z,null))},K=(a(54),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).onChange=function(t){var a=t.target;e.setState({username:a.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state.username,r=e.props.history;g.post("/signin",{username:a}).then((function(t){e.props.userSignIn(t),y.setItem("userData",t),r.push("/books")}))},e.state={username:"",minLength:4,maxLength:16},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.minLength,r=e.maxLength,o=this.props.isAuthorized,c=t.length>=a&&t.length<=r?"is-valid":"is-invalid";return o?n.a.createElement("div",{className:"already-authorized"},"You are already authorized"):n.a.createElement("div",{className:"container d-flex justify-content-center sign-in-wrapper"},n.a.createElement("form",{className:"d-flex flex-column align-items-center",onSubmit:this.onSubmit},n.a.createElement("img",{src:"https://api.adorable.io/avatars/face/eyes7/nose3/mouth3/2a5582/150",alt:"avatar",className:"sign-in-avatar"}),n.a.createElement("label",{className:"d-flex flex-column align-items-center",htmlFor:"sign-in-input"},n.a.createElement("b",null,"Username"),n.a.createElement("div",{className:"d-flex flex-column justify-content-start mt-2"},n.a.createElement("input",{type:"text",className:"form-control ".concat(c),onChange:this.onChange,maxLength:r,minLength:a,value:t,placeholder:"type Username",id:"sign-in-input",required:!0}),n.a.createElement("div",{className:"invalid-feedback text-center position-relative"},"Field is not valid!",n.a.createElement("img",{src:"https://api.adorable.io/avatars/face/eyes8/nose3/mouth7/dc3545/155",alt:"avatar",className:"sign-in-avatar invalid-img"})),n.a.createElement("div",{className:"valid-feedback text-center position-relative"},n.a.createElement("img",{src:"https://api.adorable.io/avatars/face/eyes1/nose3/mouth9/28a745/155",alt:"avatar",className:"sign-in-avatar valid-img"})))),n.a.createElement("button",{className:"btn btn-primary sign-in w-100",type:"submit"},"Sign-In")))}}]),t}(n.a.Component)),Q={userSignIn:function(e){return{type:"SIGN_IN",payload:e}}},q=Object(s.g)(Object(i.b)((function(e){return{isAuthorized:e.userData.isAuthorized}}),Q)(K)),G=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(q,null))},V=(a(55),function(){return n.a.createElement("div",{className:"not-found"},"Not Found")}),J=function(){return n.a.createElement(V,null)},M=a(32),W=Object(i.b)((function(e){return{isAuthorized:e.userData.isAuthorized}}))((function(e){var t=e.component,a=e.isAuthorized,r=Object(M.a)(e,["component","isAuthorized"]);return n.a.createElement(s.b,Object.assign({},r,{render:function(e){return a?n.a.createElement(t,e):n.a.createElement(J,null)}}))})),Y=(a(56),Object(i.b)((function(e){return{isAuthorized:e.userData.isAuthorized,booksQuantity:e.bookList.booksQuantity}}))((function(e){var t=e.isAuthorized;return n.a.createElement("div",{className:"container"},n.a.createElement(s.d,null,n.a.createElement(s.a,{from:"/",to:t?"/books":"/signin",exact:!0}),n.a.createElement(s.b,{path:"/signin",component:G}),n.a.createElement(W,{path:"/books",component:_,exact:!0}),n.a.createElement(W,{path:"/cart",component:H}),n.a.createElement(W,{path:"/books/:id",component:function(e){var t=e.match,a=e.booksQuantity,r=t.params.id;return r>(a||77)?n.a.createElement(J,null):n.a.createElement(L,{bookId:r})}}),n.a.createElement(s.b,{component:J})))}))),$=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).state={hasError:!1},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement(j,null):this.props.children}}]),t}(n.a.Component),X=a(16),Z=a(33),ee=a(17),te=a(22);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne={bookDetails:{book:null,bookId:null,maxCount:0,minCount:0,loading:!0,error:null},cart:{cartItems:[],orderTotal:0,booksInCart:0,isCartEmpty:!0,loading:!1,error:null}},oe=function(e,t,a){return-1===a?[].concat(Object(te.a)(e),[t]):[].concat(Object(te.a)(e.slice(0,a)),[t],Object(te.a)(e.slice(a+1)))},ce=function(e,t,a){if(t){var r=t.totalPrice+e.price*a;return re({},t,{count:t.count+a,totalPrice:parseFloat(r.toFixed(2))})}return re({},t,{id:e.id,count:a,totalPrice:parseFloat((e.price*a).toFixed(2)),title:e.title})};function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se={books:[],booksQuantity:null,searchText:"",filterPrice:"all",loading:!0,error:null};function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de={user:{username:null,avatar:null,token:null},isAuthorized:!1},be=Object(X.combineReducers)({bookList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"FETCH_BOOKS_REQUEST":return le({},e,{books:[],loading:!0});case"FETCH_BOOKS_SUCCESS":return le({},e,{books:r,booksQuantity:r.length,loading:!1});case"FETCH_BOOKS_FAILURE":return le({},e,{books:[],loading:!1,error:r});case"SEARCH_BOOKS":return le({},e,{searchText:r.searchText});case"FILTER_BOOKS":return le({},e,{filterPrice:r.filterPrice});case"SIGN_OUT":return le({},se);default:return e}},bookAndCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"FETCH_BOOK_REQUEST":return re({},e,{bookDetails:re({},e.bookDetails,{book:{},loading:!0})});case"FETCH_BOOK_SUCCESS":return re({},e,{bookDetails:re({},e.bookDetails,{book:r,maxCount:r.count,loading:!1})});case"FETCH_BOOK_FAILURE":return re({},e,{bookDetails:re({},e.bookDetails,{book:{},loading:!1,error:r})});case"PURCHASE_REQUEST":return re({},ne,{cart:re({},ne.cart,{loading:!0})});case"PURCHASE_SUCCESS":return re({},ne,{cart:re({},ne.cart,{loading:!1})});case"PURCHASE_FAILURE":return re({},ne,{cart:re({},ne.cart,{loading:!1,error:r})});case"BOOK_ADDED_TO_CART":var n=e.bookDetails.book,o=e.cart,c=o.cartItems,i=o.orderTotal,l=o.booksInCart,s=c.findIndex((function(e){return e.id===r.bookId})),u=c[s],m=ce(n,u,r.count),d=parseFloat((i+n.price*r.count).toFixed(2)),b=l+r.count;return re({},e,{cart:re({},e.cart,{isCartEmpty:!1,cartItems:oe(c,m,s),orderTotal:d,booksInCart:b})});case"SIGN_OUT":return re({},ne);default:return e}},userData:function(e,t){if(void 0===e)return localStorage.userData?{user:y.getItem("userData"),isAuthorized:!0}:de;var a=t.type,r=t.payload;switch(a){case"SIGN_IN":return{user:me({},r),isAuthorized:!0};case"SIGN_OUT":return localStorage.clear(),me({},de);default:return e}}}),pe=Object(X.createStore)(be,Object(Z.composeWithDevTools)());c.a.render(n.a.createElement(i.a,{store:pe},n.a.createElement($,null,n.a.createElement(l.a,null,n.a.createElement(Y,null)))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.d0eb28e3.chunk.js.map