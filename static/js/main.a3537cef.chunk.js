(this["webpackJsonpjs-band-hw-task-7"]=this["webpackJsonpjs-band-hw-task-7"]||[]).push([[0],{32:function(e,t,a){e.exports=a(51)},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(7),s=a(15),i=a(14),u=(a(41),function(e){var t=e.userName;return r.a.createElement("header",{className:"shop-header row"},r.a.createElement(s.b,{to:"/books"},r.a.createElement("div",{className:"logo"},"JS BAND STORE / Oleksandr Romanov")),r.a.createElement("div",{className:"shop-menu"},r.a.createElement(s.b,{to:"/cart"},r.a.createElement("i",{className:"cart fa fa-shopping-cart"})),r.a.createElement("div",{className:"menu-item"},r.a.createElement("button",{className:"btn btn-primary"},"Sign-Out")),r.a.createElement("div",{className:"menu-item row"},r.a.createElement("img",{src:"https://api.adorable.io/avatars/100/abott@adorable.png",alt:"avatar",className:"rounded-circle"}),r.a.createElement("div",{className:"userName"},t))))}),m=a(6),b=a(10),p=a(12),d=a(11),E=a(13),h=(a(43),function(e){var t=e.book,a=e.onView,n=t.title,o=t.author,c=t.price,l=t.cover;return r.a.createElement("div",{className:"book-list-item"},r.a.createElement("img",{src:l,alt:"cover",className:"cart-img-top"}),r.a.createElement("div",{className:"book-details"},r.a.createElement("div",{className:"book-title"},n),r.a.createElement("div",{className:"book-author"},o)),r.a.createElement("div",{className:"book-footer"},r.a.createElement("div",{className:"book-price"},c),r.a.createElement("button",{onClick:a,className:"btn btn-primary"},"View")))}),v=a(16),k=a.n(v),f=a(21),O=new function e(){Object(m.a)(this,e),this.data=[{id:0,title:"Success",author:"Romanov",price:"50$",cover:""},{id:1,title:"The Rock",author:"Rock",price:"70$",cover:""}],this.getBooks=Object(f.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://js-band-api.glitch.me/books",{method:"GET",headers:{Authorization:"Bearer ua3oiktgwrnrai4a0jtk"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),this.getBook=function(){var e=Object(f.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://js-band-api.glitch.me/books/".concat(t),{method:"GET",headers:{Authorization:"Bearer ua3oiktgwrnrai4a0jtk"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.req=Object(f.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://js-band-api.glitch.me/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"RandomUserX"})});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a);case 7:case"end":return e.stop()}}),e)})))},g=(a(45),function(){return r.a.createElement("div",null,"Loading...")}),j=(a(46),function(e){var t=e.books,a=e.onView;return r.a.createElement("ul",{className:"book-list"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(h,{book:e,onView:function(){return a(e.id)}}))})))}),y=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.booksLoaded;(0,e.booksRequested)(),O.getBooks().then((function(e){t(e)}))}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.loading,n=e.visibleBooks,o=e.onView;return a?r.a.createElement(g,null):n?r.a.createElement(j,{onView:o,books:n}):r.a.createElement(j,{onView:o,books:t})}}]),t}(r.a.Component),N={booksLoaded:function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},booksRequested:function(){return{type:"FETCH_BOOKS_REQUEST"}}},w=Object(l.b)((function(e){return{books:e.books,visibleBooks:e.visibleBooks,loading:e.loading}}),N)(y),S=(a(47),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onSearchChange=function(e){var t=e.target,n=a.props;(0,n.searchBook)(n.books,t.value)},a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.searchText;return r.a.createElement("div",{className:"filter-wrapper"},r.a.createElement("input",{type:"search",className:"form-control mr-sm-2",placeholder:"search by title",onChange:this.onSearchChange,value:e}),r.a.createElement("select",{className:"select-status select",key:"status"},r.a.createElement("option",{value:"Price"},"Price"),r.a.createElement("option",{value:"0-15"},"0-15"),r.a.createElement("option",{value:"15-30"},"15-30"),r.a.createElement("option",{value:">30"},">30")))}}]),t}(r.a.Component)),T={searchBook:function(e,t){return{type:"SEARCH_BOOK",payload:{searchText:t,books:e}}}},C=Object(l.b)((function(e){return{books:e.books,searchText:e.searchText}}),T)(S),B=Object(i.f)((function(e){var t=e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(w,{onView:function(e){t.push("/books/".concat(e))}}))})),x=(a(48),Object(l.b)((function(e){return{items:e.cartItems,total:e.orderTotal}}),(function(){return{onPurchase:function(){console.log("onPurchase")}}}))((function(e){var t=e.items,a=e.total,n=e.onPurchase;return r.a.createElement("div",{className:"cart-container"},r.a.createElement("button",{className:"btn btn-secondary",onClick:n},"Purchase"),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Book title:"),r.a.createElement("th",null,"Count:"),r.a.createElement("th",null,"Total price:"))),r.a.createElement("tbody",null,t.map((function(e){var t=e.id,a=e.title,n=e.count,o=e.total;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,o))}))))),r.a.createElement("div",{className:"total"},"Total price, $ ",a))}))),P=function(){return r.a.createElement(x,null)},_=(a(49),function(e){var t=e.book,a=t.title,n=t.author,o=t.level,c=t.tags,l=t.cover,s=t.description,i=t.price;return r.a.createElement("main",{className:"container book-page"},r.a.createElement("div",{className:"book-details-wrapper"},r.a.createElement("div",{className:"main-details"},r.a.createElement("img",{src:l,alt:"cover",className:"cart-img"}),r.a.createElement("div",{className:"book-details"},r.a.createElement("div",{className:"book-title"},r.a.createElement("b",null,"Title: "),a),r.a.createElement("div",{className:"book-author"},r.a.createElement("b",null,"Author: "),n),r.a.createElement("div",{className:"book-level"},r.a.createElement("b",null,"Level: "),o),r.a.createElement("div",{className:"book-tags"},r.a.createElement("b",null,"Tags: "),c))),r.a.createElement("div",{className:"description"},r.a.createElement("b",null,"Description: "),s)),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("div",{className:"price-counter"},r.a.createElement("div",{className:"price-item"},r.a.createElement("b",null,"Price, $"),r.a.createElement("b",null,i)),r.a.createElement("div",{className:"counter-wrapper"},r.a.createElement("b",null,"Count"),r.a.createElement("input",{type:"number",className:"counter form-control"})),r.a.createElement("div",{className:"price-item"},r.a.createElement("b",null,"Total price"),r.a.createElement("b",null,i))),r.a.createElement("button",{className:"btn btn-primary add-to-cart"},"Add to cart")))}),R=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookLoaded,a=e.bookRequested,n=e.bookId;a(),O.getBook(n).then((function(e){t(e)}))}},{key:"render",value:function(){var e=this.props,t=e.book;return e.loading?r.a.createElement(g,null):r.a.createElement(_,{book:t})}}]),t}(r.a.Component),D={bookLoaded:function(e){return{type:"FETCH_BOOK_SUCCESS",payload:e}},bookRequested:function(){return{type:"FETCH_BOOK_REQUEST"}}},F=Object(l.b)((function(e){return{book:e.book,loading:e.loading}}),D)(R),H=(a(50),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).state={hasError:!1},e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,"Error"):this.props.children}}]),t}(r.a.Component)),K=a(17),A=a(30),U=a(31);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object(U.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={books:[],loading:!0,searchText:"",visibleBooks:null,filterPrice:"Price",cartItems:[{id:1,title:"Book 1",count:1,total:100},{id:2,title:"Book 2",count:2,total:200}],orderTotal:300,bookId:null,book:[]},q=Object(K.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_BOOKS_REQUEST":return V({},e,{books:[],loading:!0});case"FETCH_BOOKS_SUCCESS":return V({},e,{books:n,loading:!1});case"FETCH_BOOK_REQUEST":return V({},e,{book:[],loading:!0});case"FETCH_BOOK_SUCCESS":return V({},e,{book:n,loading:!1});case"SEARCH_BOOK":return V({},e,{searchText:n.searchText,visibleBooks:n.books.filter((function(e){return e.title.toLowerCase().includes(n.searchText.toLowerCase())}))});default:return e}}),Object(A.composeWithDevTools)());c.a.render(r.a.createElement(l.a,{store:q},r.a.createElement(H,null,r.a.createElement(s.a,null,r.a.createElement((function(){return r.a.createElement("div",{className:"container"},r.a.createElement(u,{userName:"Alex"}),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/books",component:B,exact:!0}),r.a.createElement(i.a,{path:"/cart",component:P}),r.a.createElement(i.a,{path:"/books/:id",render:function(e){var t=e.match.params.id;return t>77?r.a.createElement("div",null,"Not Found"):r.a.createElement(F,{bookId:t})}})))}),null)))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.a3537cef.chunk.js.map